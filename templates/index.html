<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="${description}">
    <meta name="author" content="${author}">
    <link rel="icon" href="${icon}">

    <title>${title}</title>

    <link href="static/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="static/${theme}/css/cover.css" rel="stylesheet">
    <script>
        var SEP = '${SEP}';
        var all_ids = ${all_ids_as_json};
        var question_tree = ${tree_as_json};
    </script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="site-wrapper">

      <div class="site-wrapper-inner">

        <div class="cover-container">

          <div class="masthead clearfix">
            <div class="inner">
              <h3 class="masthead-brand">${title}</h3>
              <nav>
                <ul class="nav masthead-nav">
                  % for info in navlinks:
                  <li
                  % if info['link'] == '#':
                  class="active"
                  % endif
                  ><a href="${info['link']}">${info['name']}</a></li>
                  % endfor
                </ul>
              </nav>
            </div>
          </div>

          <%def name="card(node, next, segue=None, toplevel=False)">

            <div id="${node['id']}" class="inner cover hidden">

              % if segue:
              <p>${segue}</p>
              % endif

              % if 'title' in node:
              <h1 class="cover-heading">${node['title']}</h1>
              % endif

              % if 'subtitle' in node:
              <p class="lead">${node['subtitle']}</p>
              % endif

              <p class="lead">
                % if 'children' in node:
                  <a id="yes" data-next="${node['children'][0]['id']}" class="btn btn-lg btn-primary">${node['affirmative']}</a>
                % else:
                  <a href="${node['href']}" target="_blank" class="btn btn-lg btn-primary">${node['affirmative']}</a>
                % endif:
                <a id="nope" data-next="${next}" class="btn btn-lg btn-danger">${node['negative']}</a>
              </p>
              % if not toplevel:
              <p class="lead">
                <a id="back" class="btn btn-lg btn-warning">${node['backlink']}</a>
              </p>
              % endif
            </div>

            % if 'children' in node:
              % for i, child in enumerate(node['children']):
                ${card(child, node['children'][(i + 1) % len(node['children'])]['id'], segue=node.get('segue', None))}
              % endfor
            % endif

          </%def>

          % for i, child in enumerate(tree['children']):
          ${card(child, tree['children'][(i + 1) % len(tree['children'])]['id'], segue=tree['segue'], toplevel=True)}
          % endfor

          <div class="mastfoot">
            <div class="inner">
              <p>Generated by <a href="https://github.com/fedora-infra/asknot-ng">asknot-ng</a> version <code>${asknot_version}</code>.
              Written by <a href="http://threebean.org">Ralph Bean</a> and <a href="https://github.com/fedora-infra/asknot-ng/graphs/contributors">others</a>.</p>
              <p>Inspired by <a href="http://whatcanidoformozilla.org">the work</a> of <a href="http://www.joshmatthews.net">Josh Matthews</a>, <a href="http://wham.fi">Henri Koivuneva</a>, and <a href="https://github.com/jdm/asknot/contributors">others</a>.</p>
            </div>
          </div>

        </div>

      </div>

    </div>

    <script src="static/jquery/js/jquery-2.1.3.min.js"></script>
    <script src="static/bootstrap/js/bootstrap.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="static/bootstrap/js/ie10-viewport-bug-workaround.js"></script>
    <!-- This is where the magic happens -->
    <script src="static/${theme}/js/site.js"></script>
  </body>
</html>
